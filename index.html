<!DOCTYPE html>
<html class="html" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Craft Cycle - Home</title>
    <link rel="icon" href="image/logo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css"/>
    <link rel="stylesheet" href="style/output.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Chewy&family=Outfit:wght@100..900&family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap"/>
  </head>
  <body>

  <nav>
    <section class="nav-container p-4">
    <h1 class="primary-text">CRAFT CYCLE</h1>
    <a href="index.html" class="active">Home</a>
    <a href="catalog.html">Catalog</a>
    <a href="tutorial.html">Tutorial</a>
    </section>
  </nav>

    <header>
      <section class="header-container">
        <section class="header-text">
          <h2 class="primary-text text-2xl font-bold">Make It. Love It.</h2>
          <h2 class="secondary-text text-2xl font-bold">Wear It.</h2>
          <p>
            Discover our collection of easy-to-follow DIY kits. Every box turns
            hours of fun into a wonderful, wearable creation. Transforming waste
            into wonders!
          </p>
        </section>
        <section class="header-image-container">
          <img src="image/cactus.png" alt="Mini cactus craft" class="header-image" /><img
            src="image/cake.png"
            alt="Clay cake craft"
            class="header-image"
          /><img src="image/cherry.png" alt="Cherry charm craft" class="header-image" /><img
            src="image/keychain.png"
            alt="Keychain craft"
            class="header-image"
          /><img src="image/mirror.png" alt="Mirror charm craft" class="header-image" /><img
            src="image/pin.png"
            alt="Bottle cap pin craft"
            class="header-image"
          /><img src="image/teabag.png" alt="Tea bag holder craft" class="header-image" /><img
            src="image/cactus.png"
            alt="Mini cactus craft"
            class="header-image"
          /><img src="image/cake.png" alt="Clay cake craft" class="header-image" />
        </section>
      </section>
    </header>

    <main >
      <section class="main-container">
        <section class="main-header p-4">
          <h1 class="text-3xl font-bold">Featured</h1>
          <p class="p-2">Our current best-selling products, ready for you to create!</p>
          <a href="catalog.html" class="view-all-button">View All Products</a>
        </section>
        
        <section class="main-featured" id="featured-products">
          <!-- Featured products will be injected here -->
          <div id="featured-loading">Loading featured…</div>
        </section>

        <script>
          (function() {
            // Small helper: format price as "Rp 7.000"
            function formatPrice(num) {
              try {
                const value = Math.round(Number(num));
                const formatted = new Intl.NumberFormat('id-ID', { maximumFractionDigits: 0 }).format(value);
                return 'Rp ' + formatted;
              } catch (e) {
                return String(num);
              }
            }

            async function fetchProducts(url) {
              const res = await fetch(url, { cache: 'no-cache' });
              if (!res.ok) throw new Error('Failed to fetch');
              return res.json();
            }

            async function renderFeatured() {
              const container = document.getElementById('featured-products');
              if (!container) return;
              container.innerHTML = '<div id="featured-loading">Loading featured…</div>';
              try {
                const products = await fetchProducts('data/product.json');
                if (!Array.isArray(products)) {
                  container.innerHTML = '<p class="no-featured">No featured products!</p>';
                  return;
                }

                const featured = products
                  .filter(p => Number(p.featured) === 1)
                  .sort((a, b) => Number(b.id) - Number(a.id))
                  .slice(0, 3);

                if (featured.length === 0) {
                  container.innerHTML = '<p class="no-featured">No featured products!</p>';
                  return;
                }

                const html = featured.map(p => {
                  const price = formatPrice(p.price);
                  const img = p.img_data || 'https://placehold.co/400x200/cccccc/333333?text=Image+Missing';
                  return `
                    <div class="main-product-card">
                      <img src="${img}" class="main-product-card-image" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/333333?text=Image+Missing'" />
                      <div class="main-product-text">
                        <p class="main-product-card-title">${p.name}</p>
                        <p class="main-product-card-price">${price}</p>
                      </div>
                    </div>
                  `;
                }).join('');

                container.innerHTML = html;
              } catch (err) {
                console.error('Featured load error', err);
                container.innerHTML = '<p class="no-featured">No featured products!</p>';
              }
            }

            document.addEventListener('DOMContentLoaded', renderFeatured);
          })();
        </script>
          
        <section class="main-benefits">
          <div class="main-benefits-card">
            <i class="fi fi-rr-play-circle benefits-icon"></i>
            <h1 class="secondary-text">Step-by-Step Video</h1>
            <p>
              Every kit includes a full, easy-to-follow video tutorial for all
              skill levels.
            </p>
          </div>
          <div class="main-benefits-card">
            <i class="fi fi-rr-gem benefits-icon"></i>
            <h1 class="secondary-text">High Quality Materials</h1>
            <p>
              We source only the best materials to ensure your final craft is
              beautiful and durable.
            </p>
          </div>
          <div class="main-benefits-card">
            <i class="fi fi-rr-leaf benefits-icon"></i>
            <h1 class="secondary-text">Sustainable Crafting</h1>
            <p>
              Committed to low waste and mindful sourcing in every kit we
              design.
            </p>
          </div>
        </section>

        <!-- <section class="main-sign-up">
          <div class="main-sign-up-card">
            <h1>Join the Crafting Circle!</h1>
            <p>
              Join our community and get 10% off your first order and exclusive access to new kit
              releases!
            </p>
            <form action="">
              <input
                type="email"
                placeholder="Enter your email address..."
                class="main-sign-up-form"
              />
            </form>
            <a href="" class="main-sign-up-button">Sign Up!</a>
          </div>
        </section> -->
      </section>
    </main>

    <footer>
      <section class="footer-container">
        <h1 class="primary-text">CRAFT CYCLE</h1>
        <p class="footer-slogan">
          Transforming waste into wonders.
        </p>
        <div class="footer-icons">
            <a href="https://www.tiktok.com/@craftcyclee" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok"></i></a>
            <a href="https://www.instagram.com/craftcyclee" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/6281290153201" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
        </div>
        <p class="footer-copyright-text">
          &copy; 2025 Craft Cycle. All Rights Reserved.
        </p>
      </section>
    </footer>

    <script src="/assets/js/data-api.js"></script>
    <script>

    </script>

  </body>
</html>